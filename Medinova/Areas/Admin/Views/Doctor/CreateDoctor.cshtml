@model Medinova.Models.Doctor
@{
    ViewBag.Title = "Yeni Hekim Kaydı";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<style>
    /* Kart ve Üst Başlık Tasarımı */
    .hospital-form-card {
        border: none;
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.04);
        overflow: hidden;
        background-color: #fff;
    }

    .form-header-gradient {
        background: linear-gradient(135deg, #1a365d 0%, #254b85 100%);
        color: white;
        padding: 20px 25px;
    }

    /* Input ve Label Ayarları */
    .form-label {
        font-weight: 600;
        color: #334155;
        margin-bottom: 8px;
        font-size: 0.95rem;
    }

    .hospital-input {
        border: 1px solid #cbd5e1;
        border-radius: 6px;
        padding: 10px 15px;
        font-size: 0.95rem;
        transition: all 0.3s;
        background-color: #f8fafc;
    }

        .hospital-input:focus {
            background-color: #fff;
            border-color: #254b85;
            box-shadow: 0 0 0 0.2rem rgba(37, 75, 133, 0.15);
            outline: none;
        }

    /* Özel Tasarım Select (Açılır Liste) */
    .hospital-select {
        cursor: pointer;
        appearance: none; /* Varsayılan çirkin oku gizler */
        /* Kendi özel, şık okumuzu ekliyoruz */
        background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" width="292.4" height="292.4"><path fill="%23334155" d="M287 69.4a17.6 17.6 0 0 0-13-5.4H18.4c-5 0-9.3 1.8-12.9 5.4A17.6 17.6 0 0 0 0 82.2c0 5 1.8 9.3 5.4 12.9l128 127.9c3.6 3.6 7.8 5.4 12.8 5.4s9.2-1.8 12.8-5.4L287 95c3.5-3.5 5.4-7.8 5.4-12.8 0-5-1.9-9.2-5.4-12.8z"/></svg>');
        background-repeat: no-repeat;
        background-position: right 15px top 50%;
        background-size: 12px auto;
    }

    /* Sürükle Bırak Hissiyatlı Dosya Yükleme Alanı */
    .custom-file-upload {
        border: 2px dashed #cbd5e1;
        border-radius: 8px;
        padding: 30px;
        text-align: center;
        background-color: #f8fafc;
        transition: all 0.3s;
        cursor: pointer;
        position: relative;
    }

        .custom-file-upload:hover {
            border-color: #254b85;
            background-color: #f1f5f9;
        }
    /* Gerçek inputu görünmez yapıp tüm kutunun üstüne yayıyoruz */
    .file-input-hidden {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
    }

    /* Butonlar */
    .btn-save {
        background-color: #1a365d;
        color: white;
        border: none;
        padding: 10px 25px;
        font-weight: 600;
        border-radius: 6px;
        transition: all 0.3s;
    }

        .btn-save:hover {
            background-color: #122847;
            transform: translateY(-2px);
            color: white;
        }

    .btn-cancel {
        background-color: #fff;
        color: #475569;
        border: 1px solid #cbd5e1;
        padding: 10px 25px;
        font-weight: 600;
        border-radius: 6px;
        transition: all 0.3s;
        margin-right: 10px;
    }

        .btn-cancel:hover {
            background-color: #f1f5f9;
            color: #1e293b;
        }
</style>

<div class="container-fluid mt-4 mb-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            <div class="card hospital-form-card">

                <div class="form-header-gradient">
                    <h5 class="m-0"><i class="fas fa-user-plus me-2" style="opacity: 0.8;"></i>Sisteme Yeni Hekim Kaydı</h5>
                    <small style="opacity: 0.8;">Lütfen hekime ait bilgileri eksiksiz bir şekilde doldurunuz.</small>
                </div>

                <div class="card-body p-4">
                    <form method="post" enctype="multipart/form-data">

                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <label class="form-label"><i class="fas fa-user-md me-1 text-muted"></i> Hekim Adı Soyadı</label>
                                <input type="text" name="FullName" class="form-control hospital-input" placeholder="Örn: Dr. Ahmet Yılmaz" required autocomplete="off" />
                            </div>

                            <div class="col-md-6 mb-4">
                                <label class="form-label"><i class="fas fa-stethoscope me-1 text-muted"></i> Tıbbi Birim (Departman)</label>
                                <select name="DepartmentId" class="form-control hospital-input hospital-select" required>
                                    <option value="" disabled selected>-- Lütfen Birim Seçiniz --</option>
                                    @foreach (var item in (List<SelectListItem>)ViewBag.departemnts)
                                    {
                                        <option value="@item.Value">@item.Text</option>
                                    }
                                </select>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label"><i class="fas fa-align-left me-1 text-muted"></i> Görev / Özgeçmiş Özeti</label>
                            <textarea name="Description" class="form-control hospital-input" required rows="4" placeholder="Hekimin uzmanlık alanları, aldığı eğitimler ve tecrübeleri hakkında bilgi giriniz..."></textarea>
                        </div>

                        <div class="mb-4">
                            <label class="form-label"><i class="fas fa-camera me-1 text-muted"></i> Hekim Profil Fotoğrafı</label>
                            <div class="custom-file-upload">
                                <input type="file" name="ImageFile" id="fileUploadInput" class="file-input-hidden" accept="image/*" />

                                <i class="fas fa-cloud-upload-alt fa-3x mb-2" style="color: #1a365d; opacity: 0.5;"></i>
                                <h6 class="text-dark mb-1 font-weight-bold">Fotoğraf seçmek için tıklayın veya buraya sürükleyin</h6>
                                <small class="text-muted" id="fileNameDisplay">Önerilen formatlar: .jpg, .png</small>
                            </div>
                        </div>

                        <div class="d-flex justify-content-end mt-4 pt-3 border-top">
                            <a href="/Admin/Doctor/Index" class="btn btn-cancel">
                                <i class="fas fa-arrow-left me-1"></i> Vazgeç
                            </a>
                            <button type="submit" class="btn btn-save">
                                <i class="fas fa-check-circle me-1"></i> Kaydı Tamamla
                            </button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {


        const fileInput = document.getElementById('fileUploadInput');
        const fileNameDisplay = document.getElementById('fileNameDisplay');

        fileInput.addEventListener('change', function (e) {
            // Eğer dosya seçildiyse ismini ve yeşil bir onay ikonu göster
            if (e.target.files.length > 0) {
                const fileName = e.target.files[0].name;
                fileNameDisplay.innerHTML = `<span style="color: #10b981; font-weight: bold;"><i class="fas fa-check me-1"></i> ${fileName} seçildi.</span>`;
            } else {
                // Dosya seçimi iptal edilirse varsayılan metne geri dön
                fileNameDisplay.innerHTML = 'Önerilen formatlar: .jpg, .png';
            }
        });
    });
</script>